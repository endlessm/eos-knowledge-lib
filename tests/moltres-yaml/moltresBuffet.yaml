---
defines:
# Some props
- &card-all-uppercase-properties
  title-capitalization: uppercase
  context-capitalization: uppercase
- &arrangement-spacing-properties
  spacing: 20

# A few small repeated elements
- &no-sets 'Filter.Sets(invert: true)'
- &header-card Card.Title
- &main-card
  type: Card.Thumb
  properties: *card-all-uppercase-properties
- &set-card
  type: Card.Deck
  properties: *card-all-uppercase-properties

- &article-suggestions
  type: ContentGroup.ContentGroup
  slots:
    title:
      type: 'ContentGroup.StaticText'
      properties:
        label: 'You might be interested in...'
    arrangement:
      # Note spacing different from all the other arrangements; on purpose?
      shortdef: 'Arrangement.SquareGuys(max-rows: 1, spacing: 10)'
      slots:
        card: *main-card
    selection:
      type: 'Selection.SuggestedArticles'

- &category-suggestions
  type: ContentGroup.SuggestedCategories
  slots:
    arrangement:
      type: Arrangement.SquareGuys
      properties:
        <<: *arrangement-spacing-properties
        max-rows: 1
        valign: end
      slots:
        card: *set-card

- &page-with-menu
  type: Layout.SideMenu
  slots: &page-with-menu-slots
    context: Banner.Context
    sidebar:
      # Main menu
      shortdef: 'ContentGroup.SuggestedCategories(show-title: false)'
      slots:
        arrangement:
          type: Arrangement.ScrollingList
          slots:
            card:
              type: Card.Title
              properties: *card-all-uppercase-properties
            filter: Filter.Featured

- &home-page
  <<: *page-with-menu
  slots:
    <<: *page-with-menu-slots
    content:
      type: Layout.Scrolling
      slots:
        content:
          type: Layout.ResponsiveMargins
          slots:
            content:
              shortdef: 'Layout.Box(orientation: vertical)'
              slots:
                contents:
                - shortdef: 'ContentGroup.Highlights(halign: center, support-sets: 2)'
                  slots:
                    highlight-arrangement:
                      type: Arrangement.Windshield
                      properties: *arrangement-spacing-properties
                      slots:
                        card:
                          type: Card.Post
                          properties: *card-all-uppercase-properties
                        filter: *no-sets
                    support-card:
                      shortdef: 'Card.SetPreview(show-trigger: false)'
                      slots:
                        arrangement:
                          type: Arrangement.SquareGuys
                          properties:
                            <<: *arrangement-spacing-properties
                            max-rows: 2
                          slots:
                            card: *main-card
                            filter: *no-sets
                        header-card: *header-card
                    sets-filter: 'Filter.Featured(invert: true)'
                - *category-suggestions

- &set-page
  <<: *page-with-menu
  slots:
    <<: *page-with-menu-slots
    content:
      type: Layout.InfiniteScrolling
      id: theme-scroll
      slots:
        content:
          type: Layout.ResponsiveMargins
          slots:
            content:
              shortdef: 'Layout.Box(orientation: vertical)'
              slots:
                contents:
                - shortdef: 'ContentGroup.Thematic(halign: center)'
                  slots:
                    arrangement:
                      type: Arrangement.Half
                      properties: *arrangement-spacing-properties
                      slots:
                        card: *main-card
                    header-card: *header-card
                  references:
                    scroll-server: theme-scroll
                - *category-suggestions

- &search-page
  <<: *page-with-menu
  slots:
    <<: *page-with-menu-slots
    content:
      type: ContentGroup.ContentGroup
      styles:
      - search-results
      properties:
        halign: fill
      slots:
        arrangement:
          type: Arrangement.ScrollingList
          slots:
            card: Card.List
        selection: Selection.Search
        no-results:
          shortdef: Layout.Scrolling
          slots:
            content:
              shortdef: 'Layout.Box(orientation: vertical)'
              slots:
                contents:
                - ContentGroup.NoResultsMessage
                - *article-suggestions
                - *category-suggestions

- &all-sets-page
  <<: *page-with-menu
  slots:
    <<: *page-with-menu-slots
    content:
      type: Layout.InfiniteScrolling
      slots:
        content:
          type: Layout.ResponsiveMargins
          slots:
            content:
              type: ContentGroup.Set
              slots:
                arrangement:
                  type: Arrangement.SquareGuys
                  properties: *arrangement-spacing-properties
                  slots:
                    card: *set-card

- &article-page
  <<: *page-with-menu
  slots:
    <<: *page-with-menu-slots
    content:
      type: Layout.ArticleStack
      properties:
        do-sliding-animation: false
        allow-navigation: next
      slots:
        card:
          type: Card.KnowledgeDocument
          properties:
            show-titles: false
            show-toc: false
            custom-css: buffet-custom.css
        nav-card: Card.Sequence

root:
  shortdef: 'Controller.Buffet(theme: buffet)'
  slots:
    window:
      type: Window.Simple
      slots:
        search: Navigation.SearchBox
        lightbox:
          type: ContentGroup.MediaLightbox
          slots:
            card: Card.Media
        pager:
          type: Pager.Simple
          slots:
            brand-page:
              type: Banner.App
              properties:
                show-subtitle: true
                subtitle-capitalization: uppercase
            home-page: *home-page
            set-page: *set-page
            search-page: *search-page
            all-sets-page: *all-sets-page
            article-page: *article-page
