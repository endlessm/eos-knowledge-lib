---
defines:
# Some props
- &card-all-uppercase-properties
  title-capitalization: uppercase
  context-capitalization: uppercase
- &arrangement-spacing-properties
  spacing: 20

# A few small repeated elements
- &no-sets 'SetsFilter{invert: true}'
- &header-card TitleCard
- &main-card
  type: ThumbCard
  properties: *card-all-uppercase-properties
- &set-card
  type: PostCard
  properties: *card-all-uppercase-properties

- &article-suggestions
  type: SuggestedArticles
  slots:
    arrangement:
      # Note spacing different from all the other arrangements; on purpose?
      shortdef: 'SquareGuysArrangement{max-rows: 1, spacing: 10}'
      slots:
        card-type: *main-card

- &category-suggestions
  type: SuggestedCategories
  slots:
    arrangement:
      type: SquareGuysArrangement
      properties:
        <<: *arrangement-spacing-properties
        max-rows: 1
        valign: end
      slots:
        card-type: *set-card

- &page-with-menu
  type: SideMenuTemplate
  slots: &page-with-menu-slots
    context: ContextBanner
    sidebar:
      # Main menu
      shortdef: 'SuggestedCategories{show-title: false}'
      slots:
        arrangement:
          type: ScrollingListArrangement
          slots:
            card-type:
              type: TitleCard
              properties: *card-all-uppercase-properties
            filter: FeaturedFilter

- &home-page
  <<: *page-with-menu
  slots:
    <<: *page-with-menu-slots
    content:
      type: InfiniteScrollingLayout
      slots:
        content:
          type: ResponsiveMargins
          slots:
            content:
              shortdef: 'TwoPieceTemplate{orientation: vertical}'
              slots:
                first:
                  shortdef: 'Highlights{halign: center, support-sets: 2}'
                  slots:
                    highlight-arrangement:
                      type: WindshieldArrangement
                      properties: *arrangement-spacing-properties
                      slots:
                        card-type:
                          type: PostCard
                          properties: *card-all-uppercase-properties
                        filter: *no-sets
                    support-card-type:
                      shortdef: 'SetPreviewCard{show-trigger: false}'
                      slots:
                        arrangement:
                          type: SquareGuysArrangement
                          properties:
                            <<: *arrangement-spacing-properties
                            max-rows: 2
                          slots:
                            card-type: *main-card
                            filter: *no-sets
                        header-card-type: *header-card
                    sets-filter: 'FeaturedFilter{invert: true}'
                second: *category-suggestions

- &section-page
  <<: *page-with-menu
  slots:
    <<: *page-with-menu-slots
    content:
      type: InfiniteScrollingLayout
      id: theme-scroll
      slots:
        content:
          type: ResponsiveMargins
          slots:
            content:
              shortdef: 'TwoPieceTemplate{orientation: vertical}'
              slots:
                first:
                  shortdef: 'Thematic{halign: center}'
                  slots:
                    arrangement:
                      type: HalfArrangement
                      properties: *arrangement-spacing-properties
                      slots:
                        card-type: *main-card
                    header-card-type: *header-card
                  references:
                    scroll-server: theme-scroll
                second: *category-suggestions

- &search-page
  <<: *page-with-menu
  slots:
    <<: *page-with-menu-slots
    content:
      type: Search
      properties:
        halign: fill
        message-halign: center
        message-justify: left
      slots:
        arrangement:
          shortdef: 'ScrollingListArrangement{bottom-buffer: 250}'
          slots:
            card-type: ListCard
        article-suggestions: *article-suggestions
        category-suggestions: *category-suggestions

- &all-sets-page
  <<: *page-with-menu
  slots:
    <<: *page-with-menu-slots
    content:
      type: InfiniteScrollingLayout
      slots:
        content:
          type: ResponsiveMargins
          slots:
            content:
              type: SetGroup
              slots:
                arrangement:
                  type: SquareGuysArrangement
                  properties: *arrangement-spacing-properties
                  slots:
                    card-type: *set-card

- &article-page
  <<: *page-with-menu
  slots:
    <<: *page-with-menu-slots
    content:
      type: ArticleStack
      properties:
        do-sliding-animation: false
        allow-navigation: next
      slots:
        card-type:
          type: KnowledgeDocumentCard
          properties:
            show-titles: false
            show-toc: false
            custom-css: reader2.css
        nav-card-type: SequenceCard

root:
  shortdef: 'BuffetInteraction{theme: endless_buffet}'
  slots:
    window:
      shortdef: 'Window{animations: false}'
      slots:
        search: SearchBox
        lightbox:
          type: MediaLightbox
          slots:
            card-type: MediaCard
        brand-page:
          type: AppBanner
          properties:
            max-fraction: 0.6
            show-subtitle: true
            subtitle-capitalization: uppercase
        home-page: *home-page
        section-page: *section-page
        search-page: *search-page
        all-sets-page: *all-sets-page
        article-page: *article-page
